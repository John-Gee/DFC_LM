(function(){var f=[].slice,n,u,r,i,t;(function(e,o){var s;return s=function(){function f(n){this.data_attribute="data-intro";this.chardinCssClasses=["chardinjs-helper-layer","chardinjs-show-element","chardinjs-relative-position"];this.$el=e(n);this.sequenced=this.$el.data("chardin-sequenced")?!0:!1;this.sequencedItems=this._getSequencedElements();this.sequenceIdx=0;this.active=!1;this.timeOut=null;this.isAuto=this.$el.data("chardin-auto")?!0:!1;this.delayTime=this.$el.data("chardin-delay")||2e3;e(o).resize(function(n){return function(){return n.refresh()}}(this))}return f.prototype.start=function(){var i,n,r,t;if(this._overlay_visible())return!1;if(this._add_overlay_layer(),this.sequenced)this.sequenceIdx=0,this._show_sequenced_element();else for(t=this.$el.find("*["+this.data_attribute+"]:visible"),n=0,r=t.length;n<r;n++)i=t[n],this._show_element(i);return this.active=!0,this.$el.trigger("chardinJs:start")},f.prototype.toggle=function(){return this._overlay_visible()?this.stop():this.start()},f.prototype.refresh=function(){var r,n,u,t,i;if(this._overlay_visible()){for(t=this.$el.find("*["+this.data_attribute+"]:visible"),i=[],n=0,u=t.length;n<u;n++)r=t[n],i.push(this._position_helper_layer(r));return i}return this},f.prototype.stop=function(){var i,n,r,t;for(this.active=!1,this._remove_overlay_layer(),this.$el.find(".chardinjs-helper-layer").remove(),t=this.chardinCssClasses,n=0,r=t.length;n<r;n++)i=t[n],this._remove_classes(i);return o.removeEventListener?o.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this.sequenceIdx=0,this.$el.trigger("chardinJs:stop")},f.prototype._remove_classes=function(n){return this.$el.find("."+n).removeClass(n)},f.prototype.set_data_attribute=function(n){return this.data_attribute=n},f.prototype.set_data_helptext=function(n){return this.data_helptext=n},f.prototype._overlay_visible=function(){return this.$el.find(".chardinjs-overlay").length!==0},f.prototype._add_overlay_layer=function(){var f=this;if(this._overlay_visible())return!1;n=document.createElement("div");n.id="chardin-mask";u=document.createElement("div");u.className="chardinjs-overlay";n.appendChild(u);r=document.createElement("div");r.className="chardinjs-overlay";n.appendChild(r);i=document.createElement("div");i.className="chardinjs-overlay";n.appendChild(i);t=document.createElement("div");t.className="chardinjs-overlay";n.appendChild(t);this.$el.get()[0].appendChild(n);this.$el.find("#chardin-mask").fadeIn();n.onclick=function(n){return f.sequenced?f._handleMouseClick(n):f.stop()}},f.prototype._remove_overlay_layer=function(){this.$el.find("#chardin-mask").fadeOut(function(){return e(this).remove()})},f.prototype._position_overlay_layer=function(n){var f=this._get_offset(n),e=0;root_pos=this._get_offset(this.$el.get()[0]);u.style.height=f.top-e+"px";r.style.top=f.height+f.top+e+"px";r.style.height=root_pos.height-f.height-f.top-e+"px";i.style.width=f.left-e+"px";i.style.top=f.top-e+"px";i.style.height=f.height+e*2+"px";t.style.left=f.left+f.width+e+"px";t.style.top=f.top-e+"px";t.style.height=f.height+e*2+"px";t.style.width=root_pos.width-f.width-f.left-e+"px"},f.prototype._get_position=function(n){var t,r,i=n.getAttribute(this.data_attribute);return t=i[0]=="#"&&this.data_helptext[i].position?this.data_helptext[i].position:n.getAttribute("data-position"),t==null?"bottom":(r=t.split(":"))!=null?r[0]:t},f.prototype._get_position_offset=function(n){var t,r,i=n.getAttribute(this.data_attribute);return t=i[0]=="#"&&this.data_helptext[i].position?this.data_helptext[i].position:n.getAttribute("data-position"),t==null?1:1+parseInt(((r=t.split(":"))!=null?r[1]:void 0)||0,10)/100},f.prototype._get_css_attribute=function(n){var u,r,i,f,t;if(t=n.getAttribute(this.data_attribute+"-css")||"",t&&String(t).replace(/\s/g,"").length>1)for(r=t.split(" ").filter(function(n){return n.length!==0}),i=0,f=r.length;i<f;i++)u=r[i],this._add_css_attribute(u);return t},f.prototype._add_css_attribute=function(n){if(!e.inArray(n,this.chardinCssClasses)>-1)return this.chardinCssClasses.push(n)},f.prototype._getStyle=function(n,t,i){return o.getComputedStyle?o.getComputedStyle(n,i).getPropertyValue(t):n.currentStyle[t]},f.prototype._place_tooltip=function(n,t){var r,s,i,u,h,c,l,f,o;o=this._get_offset(t);t.style.top=null;t.style.right=null;t.style.bottom=null;t.style.left=null;i=this._get_position(n);switch(i){case"top":case"bottom":return u=this._get_offset(n),c=u.width,my_width=parseFloat(this._getStyle(t,"width")),t.style.left=""+(c/2*this._get_position_offset(n)-o.width/2)+"px",my_width&&e(t).width(my_width),t.style[i]="-"+o.height+"px";case"left":case"right":return f=parseFloat(this._getStyle(t,"max-width")),t.style[i]="-"+f+"px",u=this._get_offset(n),h=u.height,r=parseFloat(this._getStyle(t,"height")),r&&e(t).height(r),t.style.top=""+(h/2*this._get_position_offset(n)-r/2)+"px",l=parseFloat(this._getStyle(t,"width")),s=175-(f-l),t.style[i]="-"+s+"px"}},f.prototype._position_helper_layer=function(n){var t,i;return i=e(n).data("helper_layer"),t=this._get_offset(n),e(n).is(":visible")&&i&&i.setAttribute("style","display: block; width: "+t.width+"px; height:"+t.height+"px; top:"+t.top+"px; left: "+t.left+"px;"),e(n).is(":visible")&&!i&&this._show_element(n),!e(n).is(":visible")&&i?i.setAttribute("style","display: none; width: "+t.width+"px; height:"+t.height+"px; top:"+t.top+"px; left: "+t.left+"px;"):void 0},f.prototype._remove_sequenced_element=function(n){e(".chardinjs-helper-layer").eq(n).empty().remove();return},f.prototype._show_element=function(n){var i,t,r,f,u;if(i=document.createElement("div"),t=document.createElement("div"),r=n.getAttribute(this.data_attribute),r[0]=="#")if(f=this.data_helptext[r],f!=undefined)t.innerHTML="<div class='chardinjs-tooltiptext'>"+f.text+"<\/div>";else return!1;else t.innerHTML="<div class='chardinjs-tooltiptext'>"+r+"<\/div>";return e(n).data("helper_layer",i).data("tooltip_layer",t),n.id&&i.setAttribute("data-id",n.id),i.className="chardinjs-helper-layer chardinjs-"+this._get_position(n),this._position_helper_layer(n),this.$el.get()[0].appendChild(i),t.className="chardinjs-tooltip chardinjs-"+this._get_position(n),i.appendChild(t),this._place_tooltip(n,t),u=this,i.onclick=function(n){return u.sequenced?u._handleMouseClick(n):u.stop()},this._position_overlay_layer(n),t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),!0},f.prototype._show_sequenced_element=function(){var n=this;if(this.sequenceIdx<0&&(this.sequenceIdx=0),!this.sequencedItems[this.sequenceIdx])return this.stop();while(!this._show_element(this.sequencedItems[this.sequenceIdx]))this.sequenceIdx++;if(this.sequenceIdx<this.sequencedItems.length-1){if(this.isAuto)return this.timeOut=setTimeout(function(){return n.next(n.isAuto)},this.delayTime)}else if(this.isAuto)return this.timeOut=setTimeout(function(){return n.stop()},this.delayTime)},f.prototype.next=function(n){var t=this;return n=n!==!1?!0:!1,this.sequenceIdx++,n?(clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){return t._remove_sequenced_element(0),t._show_sequenced_element(!0),t.$el.trigger("chardinJs:next")},this.delayTime)):(this._remove_sequenced_element(0),this._show_sequenced_element(!1),this.$el.trigger("chardinJs:next"))},f.prototype.previous=function(n){var t=this;return n=n!==!1?!0:!1,this.sequenceIdx--,n?(clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){return t._remove_sequenced_element(0),t._show_sequenced_element(!0),t.$el.trigger("chardinJs:previous")},this.delayTime)):(this._remove_sequenced_element(0),this._show_sequenced_element(!1),this.$el.trigger("chardinJs:previous"))},f.prototype._handleMouseClick=function(n){if(this.active)return(size=this._getMaxSize(),n=n||o.event,n.shiftKey)?this.previous(!1):this.next(!1)},f.prototype._getMaxSize=function(){var t,i,n,r;return t=document.body,n=document.documentElement,i=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),r=Math.max(t.scrollWidth,t.offsetWidth,n.clientWidth,n.scrollWidth,n.offsetWidth),{width:r,height:i}},f.prototype._getSequencedElements=function(){return this.$el.find("*["+this.data_attribute+"]:visible").sort(function(n,t){var i,r;return i=e(n).data("sequence")||100,r=e(t).data("sequence")||100,i-r})},f.prototype._get_offset=function(n){var i,r,t;for(t={width:n.offsetWidth,height:n.offsetHeight},i=0,r=0;n&&!isNaN(n.offsetLeft)&&!isNaN(n.offsetTop);)i+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;return t.top=r,t.left=i,t},f}(),e.fn.extend({chardinJs:function(){var i,r,t,n;return n=arguments[0],r=2<=arguments.length?f.call(arguments,1):[],i=e(this[0]),t=i.data("chardinJs"),t||i.data("chardinJs",t=new s(this,n)),typeof n=="string"?t[n].apply(t,r):typeof n=="object"&&(typeof n.attribute=="string"&&t.set_data_attribute(n.attribute),typeof n.method=="string"&&t[n.method].apply(t,r),typeof n.url=="string"&&e.ajax({type:"GET",url:n.url,dataType:"json",success:function(n){t.set_data_helptext(n)}})),t}})})(window.jQuery,window)}).call(this);