const de={},en={header:{},investment:{inv:"Investment",IP:"Initial Prices",FP:"Final Prices",IA:"Initial Amounts",int:"Interest",APR:"APR",fee:"Comm.",time:"Time",comp:"Comp.",tax:"Tax"},outcome:{out:"Outcome",LMA:"Liquidity Mining Amounts",WOINT:"W/o Interest",WINT:"With Interest",values:"Values",init:"Initial",hold:"Holding",hold1:"Holding One",holdD:"Holding ",holdT:"Holding ",LMWOI:"LM w/o Int.",LMWI:"LM with Int."},plot:{title:"Changes in LM/Holding total value due to prices variations",y:"LM/Holding total value, in %.",x1:"Final/Initial price of ",x2:" in ",x3:", in %.",lint:"&#9632;with interest",lnint:"&#9632;w/o interest"},tour:{play:"Welcome to the tutorial! This button replays it.",infoB:"This button toggles the information tab.",urlB:"This button opens the site on a new tab with the current values of the calculator.",title:"This calculator estimates potential divergent changes.",CurrencyValueDiv:"Select the currency.",FirstTokenValueDiv:"Select the first coin in the pool.",OtherTokenValueDiv:"Select the other coin.",sync:"Get prices from CoinGecko.",cPriceFirstTokenDiv:"Enter the first coins's initial price.",cPriceOtherTokenDiv:"Enter the other coin's initial price.",cPriceRatioDiv:"Gives the other coin's initial price in DFI.",fPriceFirstTokenDiv:"Enter the first coins's final price.",fPriceOtherTokenDiv:"Enter the other coin's final price.",cAmountFirstTokenDiv:"Enter the amount of DFI provided to the pool.",cAmountOtherTokenDiv:"The other coin's provided amount is automatically calculated.",interestH:"This section is optional.",aprDiv:"Enter the pool's rewards in APR.",feeDiv:"Enter the pool's commissions in APR.",durationDiv:"Enter days in liquidity mining.",periodDiv:"Enter period in days to compound, the minimum is 0.0003472, apart from 0 which means no compounding.",taxDiv:"Enter tax rate.",LMA:"Amounts of coins after liquidity mining",IV:"Based on initial prices and amounts.",HV:"Based on initial amounts and final prices.",HV1:"Only holding one of the two.",LMV:"Based on final amounts and prices, without interest.",LMIV:"Based on final amounts and prices, with interest.",plot:"This plots potential values, based on the other coin's final price in DFI."},info:{welcome:"Welcome to DeFiChain Tools!",welcome2:"This site currently only offers a Liquidity Mining Calculator, but more will be added soon.",links:'This site is accessible on the web at <a href="https://www.defichain.tools">https://www.defichain.tools</a>',ipfs:'It is also available on IPFS at <a href="/ipns/defichain.tools/">/ipns/defichain.tools/</a>',gh:'You can find the source to this site and file feature requests/bugs at <a href="https://github.com/John-Gee/DFC_LM/">https://github.com/John-Gee/DFC_LM/</a>',email_off:'You can also contact us at <a href="mailto:contact@defichain.tools?subject=DefiChainTools"> contact@defichain.tools</a>',donation:"If you appreciate this site and want to support it, you can donate to this DeFiChain address:"}},fr={header:{},investment:{inv:"Investissement",IP:"Prix Initiaux",FP:"Prix Finaux",IA:"Montants Initiaux",int:"Interets",APR:"TA",fee:"Comm.",time:"Temps",comp:"Comp.",tax:"Taxe"},outcome:{out:"Resultat",LMA:"Montants De Minage De Liquidite",WOINT:"Sans Interets",WINT:"Avec Interets",values:"Valeurs",init:"Initiales",hold:"Gardees",hold1:"Gardees d'un",holdD:"Gardees de ",holdT:"Gardees de ",LMWOI:"MDL Sans Interets",LMWI:"MDL Avec Interets"},plot:{title:"Changements des valeurs totales MDL/Gardees dues aux variations de prix",y:"Valeurs totales MDL/Gardees, en %.",x1:"Prix final/initial de ",x2:" en ",x3:", en %.",lint:"&#9632;Avec Interets",lnint:"&#9632;Sans Interets"},tour:{play:"Bienvenue au tutoriel! Ce bouton le relance.",infoB:"Ce bouton bascule l'onglet d'information.",urlB:"Ce bouton ouvre le site sur un nouvel onglet avec les valeurs actuelles du calculateur.",title:"Ce calculateur estime des changements divergents potentiels.",CurrencyValueDiv:"Choisissez la devise.",FirstTokenValueDiv:"Choisissez la 1ere monnaie dans la paire.",OtherTokenValueDiv:"Choisissez l'autre monnaie.",sync:"Recuperez les prix depuis CoinGecko.",cPriceFirstTokenDiv:"Entrez le prix initial de la premiere monnaie.",cPriceOtherTokenDiv:"Entrez le prix initial de l'autre monnaie.",cPriceRatioDiv:"Donne le prix initial de l'autre monnaie en DFI.",fPriceFirstTokenDiv:"Entrer le prix final de la premiere monnaie.",fPriceOtherTokenDiv:"Entrer le prix final de l'autre monnaie.",cAmountFirstTokenDiv:"Entrer le montant de DFI fournit au fond.",cAmountOtherTokenDiv:"Le montant de l'autre monnaie fournit est calcule automatiquement.",interestH:"Cette section est optionelle.",aprDiv:"Entrez le taux annuel d'interet du fond.",feeDiv:"Entrez le taux annuel de commissions du fond.",durationDiv:"Entrez le nombre de jour du placement dans le fond.",periodDiv:"Entrez la frequence en jour de composition des interets, le minimum est 0.0003472, mis a part 0 qui veut dire pas de composition.",taxDiv:"Entrez le taux de taxe.",LMA:"Montant de monnaies apres minage de liquidite.",IV:"Bases sur les prix et montants initiaux.",HV:"Bases sur les montants initiaux et prix finaux.",HV1:"En ne gardant qu'un des deux.",LMV:"Bases sur les montants et prix finaux, sans interet.",LMIV:"Bases sur les montants et prix finaux, avec interet.",plot:"Ceci trace les valeurs potentielles, selon le changement de valeur de l'autre monnaie en DFI."},info:{welcome:"Bienvenue sur DeFiChain Tools!",welcome2:"Ce site n'offre qu'un calculateur pour Minage de Liquidite, mais d'autres outils seront bientot ajoutes.",links:'Ce site est accessible sur le web a <a href="https://www.defichain.tools">https://www.defichain.tools</a>',ipfs:'Il est aussi accessible sur IPFS a <a href="IPFS://ipns/defichain.tools/">IPFS://ipns/defichain.tools/</a>',gh:'Vous pouvez trouver les sources de ce site et remplir des requetes de fonctionnalites/rapports de bogues sur <a href="https://github.com/John-Gee/DFC_LM/">https://github.com/John-Gee/DFC_LM/</a>',email_off:'Vous pouvez aussi nous contacter a <a href="mailto:contact@defichain.tools?subject=DefiChainTools" contact@defichain.tools</a>',donation:"Si vous appreciez ce site et souhaitez le supporter, vous pouvez faire une donation sur cette adresse DeFiChain :"}};let gSelects,guideChimp=null;function closeDropDowns(){for(const e of gSelects)e.isOpen()&&e.close()}function setupi18n(){var e=new TsSelect2(my$("#i18n-toggler"),{minimumResultsForSearch:-1,width:"100%",dropdownAutoWidth:!0,escapeMarkup:function(e){return e}});return my$("#select2-i18n-toggler-container").nextSibling.firstChild.setAttribute("id","i18nArrow"),my$("#i18n-toggler").addEventListener("select2:opening",function(){closeDropDowns()}),my$("#i18n-toggler").addEventListener("change",function(){translate(),null!=guideChimp&&(guideChimp.tour=createTutorial())}),localStorage.getItem("lang")&&(my$("#i18n-toggler").selectedIndex=localStorage.getItem("lang")),changeEvent("#i18n-toggler"),e}function setupCurrency(){var e=new TsSelect2(my$("#CurrencyValue"),{minimumResultsForSearch:-1,width:"100%",dropdownAutoWidth:!0,escapeMarkup:function(e){return e}});return my$("#CurrencyValue").nextSibling.setAttribute("id","CurrencyValueDiv"),my$("#select2-CurrencyValue-container").nextSibling.firstChild.setAttribute("id","CurrencyArrow"),my$("#CurrencyValue").addEventListener("select2:opening",function(){closeDropDowns()}),my$("#CurrencyValue").addEventListener("change",function(){SwitchCurrencyLabel(),clearCPriceFirstToken(),clearCPriceOtherToken(),clearCPriceDFI()}),localStorage.getItem("Currency")&&(my$("#CurrencyValue").selectedIndex=localStorage.getItem("Currency")),e}function setupFirstToken(){var e=new TsSelect2(my$("#FirstTokenValue"),{minimumResultsForSearch:-1,width:"100%",dropdownAutoWidth:!0,templateResult:formatCoin,templateSelection:formatCoin,escapeMarkup:function(e){return e}});return my$("#select2-FirstTokenValue-container").nextSibling.firstChild.setAttribute("id","FirstTokenArrow"),my$("#FirstTokenValue").addEventListener("select2:opening",function(){closeDropDowns()}),my$("#FirstTokenValue").addEventListener("change",function(){SwitchFirstTokenLabel(),clearCPriceFirstToken();let t=my$("#OtherTokenValue"),n=-1;for(let e=0;e<t.length;e++)if("DFI"==t[e].value){n=e;break}if(0==my$("#FirstTokenValue").selectedIndex){for(let e=0;e<n;e++)t[e].className="";for(let e=n;e<t.length;e++)t[e].className="optInvisible";t.selectedIndex=1}else if(1==my$("#FirstTokenValue").selectedIndex){for(let e=0;e<n;e++)t[e].className="optInvisible";for(let e=n;e<t.length;e++)t[e].className="";t.selectedIndex=n}changeEvent("#OtherTokenValue")}),localStorage.getItem("FirstToken")&&(my$("#FirstTokenValue").selectedIndex=localStorage.getItem("FirstToken")),e}function setupOtherToken(){var e=new TsSelect2(my$("#OtherTokenValue"),{minimumResultsForSearch:-1,width:"100%",dropdownAutoWidth:!0,templateResult:formatCoin,templateSelection:formatCoin,escapeMarkup:function(e){return e}});return my$("#select2-OtherTokenValue-container").nextSibling.firstChild.setAttribute("id","OtherTokenArrow"),my$("#OtherTokenValue").addEventListener("select2:opening",function(){closeDropDowns()}),my$("#OtherTokenValue").addEventListener("change",function(){SwitchOtherTokenLabel(),clearCPriceOtherToken(),isATokenDFI()}),localStorage.getItem("OtherToken")&&(my$("#OtherTokenValue").selectedIndex=localStorage.getItem("OtherToken")),e}function setupPreGuide(){my$("#play").addEventListener("mouseover",function(){""==my$("#calc").style.display&&(my$("#play").style.display="none",my$("#play2").style.display="block")}),my$("#play").addEventListener("mouseout",function(){""==my$("#calc").style.display&&(my$("#play").style.display="block",my$("#play2").style.display="none")}),my$("#playButtons").addEventListener("click",function(){""==my$("#calc").style.display&&startTutorial(guideChimp)}),"Started"!=localStorage.getItem("Tutorial")&&startTutorial(guideChimp)}function setupInfo(){my$("#infoB").addEventListener("mouseover",function(){my$("#infoB").style.display="none",my$("#infoB2").style.display="block"}),my$("#infoB").addEventListener("mouseout",function(){my$("#infoB").style.display="block",my$("#infoB2").style.display="none"}),my$("#infoButtons").addEventListener("click",function(){info()})}function setupShare(){my$("#urlB").addEventListener("mouseover",function(){my$("#urlB").style.display="none",my$("#urlB2").style.display="block"}),my$("#urlB").addEventListener("mouseout",function(){my$("#urlB").style.display="block",my$("#urlB2").style.display="none"}),my$("#urlButtons").addEventListener("click",function(){share()})}function clearCPriceFirstToken(){"usd"==my$("#CurrencyValue").value&&"dUSD"==my$("#FirstTokenValue").value?(my$("#cPriceFirstToken").value=1,inputEvent("#cPriceFirstToken"),my$("#cPriceFirstToken").disabled=!0,my$("#cPriceFirstToken").parentElement.classList.add("auto"),my$("#fPriceFirstToken").value=1,inputEvent("#fPriceFirstToken"),my$("#fPriceFirstToken").disabled=!0,my$("#fPriceFirstToken").parentElement.classList.add("auto")):(my$("#cPriceFirstToken").value="",inputEvent("#cPriceFirstToken"),my$("#cPriceFirstToken").disabled=!1,my$("#cPriceFirstToken").parentElement.classList.remove("auto"),my$("#fPriceFirstToken").value="",inputEvent("#fPriceFirstToken"),my$("#fPriceFirstToken").disabled=!1,my$("#fPriceFirstToken").parentElement.classList.remove("auto"))}function clearCPriceOtherToken(){"usd"==my$("#CurrencyValue").value&&("dUSDC"==my$("#OtherTokenValue").value||"dUSDT"==my$("#OtherTokenValue").value)||"btc"==my$("#CurrencyValue").value&&"dBTC"==my$("#OtherTokenValue").value||"eth"==my$("#CurrencyValue").value&&"dETH"==my$("#OtherTokenValue").value?(my$("#cPriceOtherToken").value=1,inputEvent("#cPriceOtherToken"),my$("#cPriceOtherToken").disabled=!0,my$("#cPriceOtherToken").parentElement.classList.add("auto"),my$("#fPriceOtherToken").value=1,inputEvent("#fPriceOtherToken"),my$("#fPriceOtherToken").disabled=!0,my$("#fPriceOtherToken").parentElement.classList.add("auto")):"bits"==my$("#CurrencyValue").value&&"BTC"==my$("#OtherTokenValue").value?(my$("#cPriceOtherToken").value=1e6,inputEvent("#cPriceOtherToken"),my$("#cPriceOtherToken").disabled=!0,my$("#cPriceOtherToken").parentElement.classList.add("auto"),my$("#fPriceOtherToken").value=1e6,inputEvent("#fPriceOtherToken"),my$("#fPriceOtherToken").disabled=!0,my$("#fPriceOtherToken").parentElement.classList.add("auto")):"sats"==my$("#CurrencyValue").value&&"BTC"==my$("#OtherTokenValue").value?(my$("#cPriceOtherToken").value=1e8,inputEvent("#cPriceOtherToken"),my$("#cPriceOtherToken").disabled=!0,my$("#cPriceOtherToken").parentElement.classList.add("auto"),my$("#fPriceOtherToken").value=1e8,inputEvent("#fPriceOtherToken"),my$("#fPriceOtherToken").disabled=!0,my$("#fPriceOtherToken").parentElement.classList.add("auto")):(my$("#cPriceOtherToken").value="",inputEvent("#cPriceOtherToken"),my$("#fPriceOtherToken").value="",inputEvent("#fPriceOtherToken"),my$("#cPriceFirstToken").disabled||(my$("#cPriceOtherToken").disabled=!1,my$("#cPriceOtherToken").parentElement.classList.remove("auto")),my$("#fPriceFirstToken").disabled||(my$("#fPriceOtherToken").disabled=!1,my$("#fPriceOtherToken").parentElement.classList.remove("auto")))}function clearCPriceDFI(){my$("#cPriceDFI").value="",inputEvent("#cPriceDFI"),my$("#fPriceDFI").value="",inputEvent("#fPriceDFI")}function SwitchCurrencyLabel(){const t=my$("#CurrencyValue").options[my$("#CurrencyValue").selectedIndex].innerHTML;myMap("[name='Currency']",function(e){e.innerHTML=t}),localStorage.setItem("Currency",my$("#CurrencyValue").selectedIndex)}function SwitchFirstTokenLabel(){const t=my$("#FirstTokenValue").value;myMap("[name='FirstToken']",function(e){e.innerHTML=coinNameToImg(t)}),myMap("[name='FirstRatio']",function(e){e.innerHTML=coinNameToImg(t)}),my$("#xLabel").children[3].innerHTML=t,localStorage.setItem("FirstToken",my$("#FirstTokenValue").selectedIndex)}function SwitchOtherTokenLabel(){const t=my$("#OtherTokenValue").value;myMap("[name='OtherToken']",function(e){e.innerHTML=coinNameToImg(t)}),myMap("[name='OtherRatio']",function(e){e.innerHTML=coinNameToImg(t)}),my$("#xLabel").children[1].innerHTML=t,localStorage.setItem("OtherToken",my$("#OtherTokenValue").selectedIndex)}function formatCoin(e,t){if(e.element&&e.element.className&&t.classList.add(e.element.className),!e.id)return e.text;const n=document.createElement("img");return n.src="img/"+e.id+".svg",n.class="img-flag",n}function coinNameToImg(e){return"<img src='img/"+e+".svg' class='img-flag' alt='"+e+"'/>"}function prettyNumber(e){return""==e?"":numbro(e).format({optionalMantissa:!0,thousandSeparated:!0,trimMantissa:!0})}function prettyNumberCleaner(e){return numbro(e).format({optionalMantissa:!0,thousandSeparated:!0,trimMantissa:!0,mantissa:2})}function cCalculate(){xCalculate("c")}function fCalculate(){xCalculate("f")}function xCalculate(e){calcPriceRatio(e),calculate()}function calcPriceRatio(e){var t="#"+e+"PriceOtherToken",n="#"+e+"PriceFirstToken",e="#"+e+"PriceRatio";my$(n).value&&my$(t).value?my$(e).value=prettyNumber(my$(t).value/my$(n).value):my$(e).value=""}function createTutorial(){var e="right";let t="top",n="right",i="left",a="left";window.matchMedia("(max-width: 900px)").matches&&(t="left",n="top",i="right",a="left");var r=getLanguageObj();return[{element:"#play",title:r.tour.play},{element:"#infoB",title:r.tour.infoB},{title:r.tour.title},{element:"#CurrencyValueDiv",title:r.tour.CurrencyValueDiv,position:e},{element:"#FirstTokenValueDiv",title:r.tour.FirstTokenValueDiv,position:e},{element:"#OtherTokenValueDiv",title:r.tour.OtherTokenValueDiv,position:e},{element:"#sync",title:r.tour.sync,position:e},{element:"#cPriceFirstTokenDiv",title:r.tour.cPriceFirstTokenDiv,position:e},{element:"#cPriceOtherTokenDiv",title:r.tour.cPriceOtherTokenDiv,position:e},{element:"#cPriceRatioDiv",title:r.tour.cPriceRatioDiv,position:e},{element:"#fPriceFirstTokenDiv",title:r.tour.fPriceFirstTokenDiv,position:e},{element:"#fPriceOtherTokenDiv",title:r.tour.fPriceOtherTokenDiv,position:e},{element:"#cAmountFirstTokenDiv",title:r.tour.cAmountFirstTokenDiv,position:t},{element:"#cAmountOtherTokenDiv",title:r.tour.cAmountOtherTokenDiv,position:t},{element:"#interestH",title:r.tour.interestH,position:t},{element:"#aprDiv",title:r.tour.aprDiv,position:t},{element:"#feeDiv",title:r.tour.feeDiv,position:t},{element:"#durationDiv",title:r.tour.durationDiv,position:t},{element:"#periodDiv",title:r.tour.periodDiv,position:t},{element:"#taxDiv",title:r.tour.taxDiv,position:t},{element:"#LMA",title:r.tour.LMA,position:n},{element:"#IV",title:r.tour.IV,position:i},{element:"#HV",title:r.tour.HV,position:a},{element:"#HV1",title:r.tour.HV1,position:a},{element:"#LMV",title:r.tour.LMV,position:i},{element:"#LMIV",title:r.tour.LMIV,position:a},{element:"#plot",title:r.tour.plot,position:"top"},{element:"#urlB",title:r.tour.urlB}]}function startTutorial(){function e(){var e=localStorage.getItem("Tutorial-N");e?guideChimp.start(e):guideChimp.start(),localStorage.setItem("Tutorial","Started")}null===guideChimp?setupGuide(e):e()}function setupGuide(e){lazyLoadStyle("Libraries/GuideChimp/guidechimp.min.css"),lazyLoadStyle("css/guide.css"),lazyLoadScript("Libraries/GuideChimp/guidechimp.min.js",()=>{(guideChimp=GuideChimp(createTutorial(),{padding:5})).on("onStop",()=>{localStorage.setItem("Tutorial-N",guideChimp.currentStepIndex)}),guideChimp.on("onComplete",()=>{localStorage.removeItem("Tutorial-N")}),e()})}function compareValues(e,t,n,i){my$(i).parentElement.firstElementChild.classList.remove("minus"),my$(i).parentElement.firstElementChild.classList.remove("plus"),e!=t&&0!=e&&0!=t&&(t<e?my$(i).parentElement.firstElementChild.classList.add("minus"):my$(i).parentElement.firstElementChild.classList.add("plus"))}function compareTotalValues(n,i,a,r,o,l){if(o){let e="c",t=n;n<i&&(e="fh",t=i),t<a&&(e="fhT1",t=a),t<r&&(e="fhT2",t=r),t<o&&(e="f",t=o),t<l&&(e="fi",t=l),t&&(my$("#best").classList.add("best-"+e),"fhT1"!=e&&"fhT2"!=e||my$("#best1").classList.add("best-fh1"))}}function calculate(){let n=0,i=0;var o;let l=0,a=0,r=0,s=0,u=0,c=0,m=0,d=0,y=0,p=0,h=0,f=0,v=0,T=0,k=0,$=0,g=0,P=0,F=0,I=0,O=0;var e=my$("#calc").style.display;if(my$("#calc").style.display="none",my$("#best").className="",my$("#best1").className="",runOnChildren("#amountsParent > div",function(e){e.classList.add("shadow")}),runOnChildren("#values > div",function(e){e.classList.add("shadow")}),my$("#valuesTitles3").classList.remove("shadow"),runOnChildren("#fAmounts > div",function(e){e.dataset.tooltip=""}),runOnChildren("#fAmountsI > div",function(e){e.dataset.tooltip=""}),runOnChildren("#mining > div",function(e){e.dataset.tooltip=""}),runOnChildren("#miningI > div",function(e){e.dataset.tooltip=""}),my$("#int").hidden=!0,createEmptyPlot(),(my$("#cPriceOtherToken").value&&my$("#cPriceFirstToken").value||my$("#cPriceRatio").value)&&my$("#cAmountFirstToken").value){let e=0;o=+my$("#cAmountFirstToken").value,my$("#cPriceOtherToken").value&&my$("#cPriceFirstToken").value?(i=+my$("#cPriceOtherToken").value,n=+my$("#cPriceFirstToken").value,e=i/n):my$("#cPriceRatio").value&&(e=+my$("#cPriceRatio").value),l=o/e,r=l*i,a=o*n,s=r+a;var D=+my$("#fPriceOtherToken").value,V=+my$("#fPriceFirstToken").value,C=+my$("#fPriceDFI").value;let t=+my$("#fPriceRatio").value;if(my$("#fPriceOtherToken").value&&my$("#fPriceFirstToken").value&&(t=D/V,V==n&&D==i&&(u=o,c=l)),my$("#initialValues").classList.remove("shadow"),t){if(c||u||(c=Math.sqrt(l*o*1/t),u=t*c),addDiffToolTip("#fAmountFirstToken",u,o),addDiffToolTip("#fAmountOtherToken",c,l),h=c*D,p=u*V,f=h+p,P=l*D,g=o*V,F=P+g,I=2*o*V,O=2*l*D,addDiffToolTip("#fValueFirstToken",p,g),addDiffToolTip("#fValueOtherToken",h,P),addDiffToolTip("#fValue",f,F),my$("#fAmounts").classList.remove("shadow"),my$("#holding").classList.remove("shadow"),my$("#holding1").classList.remove("shadow"),my$("#mining").classList.remove("shadow"),(0<my$("#apr").value||0<my$("#fee").value)&&my$("#duration").value&&0<my$("#duration").value){let e=+my$("#period").value;var L=+my$("#duration").value,b=+my$("#apr").value/100,E=+my$("#fee").value/100;let t=+my$("#tax").value/100;1<t&&(alert("Tax cannot be bigger than 100%!"),t=1);var w,x,S=1634e-7;let n=0,i=L,a=0,r=0;e&&e<=L&&(e<1/2880&&(e=1/2880),n=Math.floor(L/e),w=365/e,x=n*e,i=L-x,a=Math.pow(1+.998*b/w,w*x/365)-1,r=Math.pow(1+.998*E/w,w*x/365)-1),m=u*(1+a+r+E*i/365),d=c*(1+a+r+E*i/365),"DFI"==my$("#FirstTokenValue").value?(m+=2*m*b*i/365-2*S*n)<u&&(m=u):"DFI"==my$("#OtherTokenValue").value?(d+=2*d*b*i/365-2*S*n)<c&&(d=c):(y=m*V/C*2*b*i/365-2*S*n)<0&&(y=0),m>u&&(m-=(m-u)*t),d>c&&(d-=(d-c)*t),addDiffToolTip("#fAmountFirstTokenI",m,o),addDiffToolTip("#fAmountOtherTokenI",d,l),T=d*D,v=m*V,k=y*C,$=T+v+k,addDiffToolTip("#fValueFirstTokenI",v,g),addDiffToolTip("#fValueOtherTokenI",T,P),addDiffToolTip("#fValueI",$,F),my$("#fAmountsI").classList.remove("shadow"),my$("#miningI").classList.remove("shadow")}createPlot(e,t,f,$)}}my$("#cAmountOtherToken").value=prettyNumber(l),my$("#cValueOtherToken").value=prettyNumber(r),my$("#cValueFirstToken").value=prettyNumber(a),my$("#cValue").value=prettyNumber(s),my$("#fAmountOtherToken").value=prettyNumber(c),my$("#fAmountFirstToken").value=prettyNumber(u),my$("#fAmountOtherTokenI").value=prettyNumber(d),my$("#fAmountFirstTokenI").value=prettyNumber(m),my$("#fAmountDFII").value=prettyNumber(y),my$("#fValueOtherToken").value=prettyNumber(h),my$("#fValueFirstToken").value=prettyNumber(p),my$("#fValue").value=prettyNumber(f),my$("#fValueOtherTokenH").value=prettyNumber(P),my$("#fValueFirstTokenH").value=prettyNumber(g),my$("#fValueH").value=prettyNumber(F),my$("#fValueFirstTokenHFirstToken").value=prettyNumber(I),my$("#fValueOtherTokenHOtherToken").value=prettyNumber(O),compareValues(g,p,"#fValueFirstTokenH","#fValueFirstToken"),compareValues(P,h,"#fValueOtherTokenH","#fValueOtherToken"),compareValues(F,f,"#fValueH","#fValue"),my$("#fValueOtherTokenI").value=prettyNumber(T),my$("#fValueFirstTokenI").value=prettyNumber(v),my$("#fValueDFII").value=prettyNumber(k),my$("#fValueI").value=prettyNumber($),compareValues(g,v,"#fValueFirstTokenH","#fValueFirstTokenI"),compareValues(P,T,"#fValueOtherTokenH","#fValueOtherTokenI"),compareValues(F,$,"#fValueH","#fValueI"),compareTotalValues(s,F,I,O,f,$),my$("#calc").style.display=e}function compareNumbers(e,t){return e-t}function createEmptyPlot(){new Chartist.Line(".ct-chart",{series:[[],[]]})}function createPlot(e,t,n,i){t=Math.round(t/e*100);let a=[],r=[],o=[],l;l=t<500?50:Math.round(2*t/11);for(let e=0;e<11;e++)a.push(l*e);a.push(t),a=[...new Set(a)].sort(compareNumbers);for(let e=0;e<a.length;e++)r.push(100*(2*Math.sqrt(a[e]/100)/(1+a[e]/100)-1));if(i){my$("#int").hidden=!1;var s=i/n;for(let e=0;e<a.length;e++)o.push(100*(2*s*Math.sqrt(a[e]/100)/(1+a[e]/100)-1))}a[a.indexOf(t)]=t+" (from input)",new Chartist.Line(".ct-chart",{labels:a,series:[r,o]},{high:Math.max.apply(null,r.concat(o)),low:-100,showArea:!0,plugins:[Chartist.plugins.ctThreshold({threshold:0})]})}async function getOraclePrice(e){return fetch("https://ocean.defichain.com/v0/mainnet/prices/"+e+"-USD").then(e=>e.json()).then(function(e){return e.data.price.aggregated.amount}).catch(function(){return alert("An error happened while querying the oracle."),0})}async function getCoinGeckoPrice(t,n){return fetch("https://api.coingecko.com/api/v3/simple/price?ids="+t+"&vs_currencies="+n).then(e=>e.json()).then(function(e){return e[t][n]}).catch(function(){return alert("An error happened while querying CoinGecko."),0})}async function getCurrencyUSDRatio(e){var t=await getCoinGeckoPrice("bitcoin","usd");return 0==t?0:await getCoinGeckoPrice("bitcoin",e)/t}async function getPrices(){my$("#sync").classList.add("rotate");let e=1;var t=my$("#OtherTokenValue").options[my$("#OtherTokenValue").selectedIndex].text;"dUSD"!=my$("#FirstTokenValue").value&&(e=await getOraclePrice(my$("#FirstTokenValue").options[my$("#FirstTokenValue").selectedIndex].text));let n=await getOraclePrice(t),i=1;t=my$("#CurrencyValue").value;"usd"!=t&&(i=await getCurrencyUSDRatio(t));let a=await getOraclePrice("DFI");0==e||0==n||0==a||0==i?(e="",n="",a=""):(e*=i,n*=i,a*=i),my$("#cPriceFirstToken").value=e,inputEvent("#cPriceFirstToken"),my$("#cPriceOtherToken").disabled||(my$("#cPriceOtherToken").value=n,inputEvent("#cPriceOtherToken")),my$("#cPriceDFI").value=a,inputEvent("#cPriceDFI"),my$("#sync").classList.remove("rotate")}function addDiffToolTip(e,t,n){let i;t-=n;i=e.includes("Value")?"Compared to Holding Value\n$ ":"Compared to the Initial Amount\n",0<t&&(i+="+"),i=i+prettyNumberCleaner(t)+"\n% ",0<t&&(i+="+"),i+=prettyNumberCleaner(t/n*100),my$(e).parentElement.dataset.tooltip=i}function getLanguageObj(){return eval(my$("#i18n-toggler").value)}function translate(){const e=new Translator({detectLanguage:!1});var t=my$("#i18n-toggler").value;e.add(t,getLanguageObj()).translatePageTo(t),localStorage.setItem("lang",my$("#i18n-toggler").selectedIndex)}function info(){""==my$("#calc").style.display?(my$("#calc").style.display="none",my$("#info").style.display="grid",my$("body").style.gridTemplateAreas="'h' 'i'"):(my$("#calc").style.display="",my$("#info").style.display="none",my$("body").style.gridTemplateAreas="'h' 'ja'")}function copyPrices(){my$("#fPriceFirstToken").value=my$("#cPriceFirstToken").value,my$("#fPriceOtherToken").value=my$("#cPriceOtherToken").value,my$("#fPriceDFI").value=my$("#cPriceDFI").value,inputEvent("#fPriceOtherToken")}function getTokenDFI(){return"DFI"==my$("#FirstTokenValue").value?0:"DFI"==my$("#OtherTokenValue").value?1:-1}function isATokenDFI(){if(0<=getTokenDFI())for(const e of document.getElementsByClassName("third"))e.classList.add("hidden");else for(const t of document.getElementsByClassName("third"))t.classList.remove("hidden")}function parseURL(){var e=window.location.search,t=new URLSearchParams(e);return parseParamIndex(t,"OtherTokenValue"),parseParamIndex(t,"FirstTokenValue"),parseParamIndex(t,"CurrencyValue"),parseParam(t,"cPriceFirstToken"),parseParam(t,"cPriceOtherToken"),parseParam(t,"cPriceDFI"),parseParam(t,"fPriceFirstToken"),parseParam(t,"fPriceOtherToken"),parseParam(t,"fPriceDFI"),parseParam(t,"cAmountFirstToken"),parseParam(t,"apr"),parseParam(t,"fee"),parseParam(t,"duration"),parseParam(t,"period"),parseParam(t,"tax"),e}function parseParam(e,t){e.get(t)&&(my$("#"+t).value=e.get(t),changeEvent("#"+t))}function parseParamIndex(e,t){e=e.get(t);e&&(my$("#"+t).selectedIndex=e),"OtherTokenValue"!=t&&changeEvent("#"+t)}function share(){var e=window.location.href.split("?")[0].concat("?",getParamIndex("FirstTokenValue"),getParamIndex("CurrencyValue"),getParam("cPriceFirstToken"),getParamIndex("OtherTokenValue"),getParam("cPriceOtherToken"),getParam("cPriceDFI"),getParam("fPriceFirstToken"),getParam("fPriceOtherToken"),getParam("fPriceDFI"),getParam("cAmountFirstToken"),getParam("apr"),getParam("fee"),getParam("duration"),getParam("period"),getParam("tax"));window.open(e,"_blank")}function getParam(e){return""===my$("#"+e).value?"":e.concat("=",my$("#"+e).value,"&")}function getParamIndex(e){return""===my$("#"+e).selectedIndex?"":e.concat("=",my$("#"+e).selectedIndex,"&")}function lazyLoadStyle(e){const t=document.createElement("link");t.href=new URL(e,document.baseURI).href,t.rel="stylesheet",t.type="text/css",document.head.append(t)}function lazyLoadScript(e,t){const n=document.createElement("script");n.src=new URL(e,document.baseURI).href,n.async=!1,document.head.append(n),n.addEventListener("load",()=>{t(),document.dispatchEvent(new Event(getFilename(e+"Loaded")))})}function getFilename(e){return e.substring(e.lastIndexOf("/")+1)}function mousedownEvent(e){my$(e).dispatchEvent(new Event("mousedown"))}function inputEvent(e){my$(e).dispatchEvent(new Event("input"))}function changeEvent(e){my$(e).dispatchEvent(new Event("change"))}function runOnChildren(e,t){var n=document.querySelectorAll(e);for(let e=0;e<n.length;++e)t(n[e])}function myMap(e,t){return Array.prototype.map.call(document.querySelectorAll(e),t)}function my$(e){return document.querySelector(e)}document.addEventListener("DOMContentLoaded",function(){var e=my$("#calc").style.display;my$("body").style.display="none",(gSelects=new Array).push(setupi18n()),setupPreGuide(),setupInfo(),gSelects.push(setupCurrency()),gSelects.push(setupFirstToken()),gSelects.push(setupOtherToken()),""!=parseURL()&&(calcPriceRatio("c"),calcPriceRatio("f"),calculate()),setupShare(),my$("#cPriceOtherToken").addEventListener("input",cCalculate),my$("#cPriceFirstToken").addEventListener("input",cCalculate),my$("#cAmountFirstToken").addEventListener("input",calculate),my$("#fPriceOtherToken").addEventListener("input",fCalculate),my$("#fPriceFirstToken").addEventListener("input",fCalculate),my$("#apr").addEventListener("input",calculate),my$("#fee").addEventListener("input",calculate),my$("#duration").addEventListener("input",calculate),my$("#period").addEventListener("input",calculate),my$("#tax").addEventListener("input",calculate),my$("#sync").addEventListener("click",getPrices),my$("#copy").addEventListener("click",copyPrices),my$("body").style.display=e});
//# sourceMappingURL=functions.min.js.map