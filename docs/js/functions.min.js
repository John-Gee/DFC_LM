const de={},en={header:{},investment:{inv:"Investment",IP:"Initial Prices",FP:"Final Prices",IA:"Initial Amounts",int:"Interest",APR:"APR",fee:"Comm.",time:"Time",comp:"Comp.",tax:"Tax"},outcome:{out:"Outcome",LMA:"Liquidity Mining Amounts",WOINT:"W/o Interest",WINT:"With Interest",values:"Values",init:"Initial",hold:"Holding",hold1:"Holding One",holdD:"Holding ",holdT:"Holding ",LMWOI:"LM w/o Int.",LMWI:"LM with Int."},plot:{title:"Changes in LM/Holding total value due to prices variations",y:"LM/Holding total value, in %.",x1:"Final/Initial price of ",x2:" in ",x3:", in %.",lint:"&#9632;with interest",lnint:"&#9632;w/o interest"},tour:{play:"Welcome to the tutorial! This button replays it.",infoB:"This button toggles the information tab.",title:"This calculator estimates potential divergent changes.",CurrencyValueDiv:"Select the currency.",FirstTokenValueDiv:"Select the first coin in the pool.",OtherTokenValueDiv:"Select the other coin.",sync:"Get prices from CoinGecko.",cPriceDFIDiv:"Enter DFI's initial price.",cPriceTokenDiv:"Enter the other coin's initial price.",cPriceRatioDiv:"Gives the other coin's initial price in DFI.",fPriceDFIDiv:"Enter DFI's final price.",fPriceTokenDiv:"Enter the other coin's final price.",cAmountDFIDiv:"Enter the amount of DFI provided to the pool.",cAmountTokenDiv:"The other coin's provided amount is automatically calculated.",interestH:"This section is optional.",aprDiv:"Enter the pool's rewards in APR.",feeDiv:"Enter the pool's commissions in APR.",durationDiv:"Enter days in liquidity mining.",periodDiv:"Enter period in days to compound, the minimum is 0.0003472, apart from 0 which means no compounding.",taxDiv:"Enter tax rate.",LMA:"Amounts of coins after liquidity mining",IV:"Based on initial prices and amounts.",HV:"Based on initial amounts and final prices.",HV1:"Only holding one of the two.",LMV:"Based on final amounts and prices, without interest.",LMIV:"Based on final amounts and prices, with interest.",plot:"This plots potential values, based on the other coin's final price in DFI."},info:{welcome:"Welcome to DeFiChain Tools!",welcome2:"This site currently only offers a Liquidity Mining Calculator, but more will be added soon.",links:'This site is accessible on the web at <a href="https://www.defichain.tools">https://www.defichain.tools</a>',ipfs:'It is also available on IPFS at <a href="/ipns/defichain.tools/">/ipns/defichain.tools/</a>',gh:'You can find the source to this site and file feature requests/bugs at <a href="https://github.com/John-Gee/DFC_LM/">https://github.com/John-Gee/DFC_LM/</a>',email_off:'You can also contact us at <a href="mailto:contact@defichain.tools?subject=DefiChainTools"> contact@defichain.tools</a>',donation:"If you appreciate this site and want to support it, you can donate to this DeFiChain address:"}},fr={header:{},investment:{inv:"Investissement",IP:"Prix Initiaux",FP:"Prix Finaux",IA:"Montants Initiaux",int:"Intérêts",APR:"TA",fee:"Comm.",time:"Temps",comp:"Comp.",tax:"Taxe"},outcome:{out:"Resultat",LMA:"Montants De Minage De Liquidite",WOINT:"Sans Intérêts",WINT:"Avec Intérêts",values:"Valeurs",init:"Initiales",hold:"Gardees",hold1:"Gardees d'un",holdD:"Gardees de ",holdT:"Gardees de ",LMWOI:"MDL Sans Intérêts",LMWI:"MDL Avec Intérêts"},plot:{title:"Changements des valeurs totales MDL/Gardées dues aux variations de prix",y:"Valeurs totales MDL/Gardées, en %.",x1:"Prix final/initial de ",x2:" en ",x3:", en %.",lint:"&#9632;Avec Intérêts",lnint:"&#9632;Sans Intérêts"},tour:{play:"Bienvenue au tutoriel! Ce bouton le relance.",infoB:"Ce bouton bascule l'onglet d'information.",title:"Ce calculateur estime des changements divergents potentiels.",CurrencyValueDiv:"Choisissez la devise.",FirstTokenValueDiv:"Choisissez la 1ère monnaie dans la paire.",OtherTokenValueDiv:"Choisissez l'autre monnaie.",sync:"Récupérez les prix depuis CoinGecko.",cPriceDFIDiv:"Entrez le prix initial de DFI.",cPriceTokenDiv:"Entrez le prix initial de l'autre monnaie.",cPriceRatioDiv:"Donne le prix initial de l'autre monnaie en DFI.",fPriceDFIDiv:"Entrer le prix final de DFI.",fPriceTokenDiv:"Entrer le prix final de l'autre monnaie.",cAmountDFIDiv:"Entrer le montant de DFI fournit au fond.",cAmountTokenDiv:"Le montant de l'autre monnaie fournit est calculé automatiquement.",interestH:"Cette section est optionelle.",aprDiv:"Entrez le taux annuel d'intérêt du fond.",feeDiv:"Entrez le taux annuel de commissions du fond.",durationDiv:"Entrez le nombre de jour du placement dans le fond.",periodDiv:"Entrez la fréquence en jour de composition des intérêts, le minimum est 0.0003472, mis à part 0 qui veut dire pas de composition.",taxDiv:"Entrez le taux de taxe.",LMA:"Montant de monnaies après minage de liquidité.",IV:"Basés sur les prix et montants initiaux.",HV:"Basés sur les montants initiaux et prix finaux.",HV1:"En ne gardant qu'un des deux.",LMV:"Basés sur les montants et prix finaux, sans intérêt.",LMIV:"Basés sur les montants et prix finaux, avec intérêt.",plot:"Ceci trace les valeurs potentielles, selon le changement de valeur de l'autre monnaie en DFI."},info:{welcome:"Bienvenue sur DeFiChain Tools!",welcome2:"Ce site n'offre qu'un calculateur pour Minage de Liquidité, mais d'autres outils seront bientôt ajoutés.",links:'Ce site est accessible sur le web à <a href="https://www.defichain.tools">https://www.defichain.tools</a>',ipfs:'Il est aussi accessible sur IPFS à <a href="IPFS://ipns/defichain.tools/">IPFS://ipns/defichain.tools/</a>',gh:'Vous pouvez trouver les sources de ce site et remplir des requêtes de fonctionnalités/rapports de bogues sur <a href="https://github.com/John-Gee/DFC_LM/">https://github.com/John-Gee/DFC_LM/</a>',email_off:'Vous pouvez aussi nous contacter à <a href="mailto:contact@defichain.tools?subject=DefiChainTools" contact@defichain.tools</a>',donation:"Si vous appréciez ce site et souhaitez le supporter, vous pouvez faire une donation sur cette adresse DeFiChain :"}};var gSelects;function closeDropDowns(){for(const e of gSelects)e.isOpen()&&e.close()}function setupi18n(){var e=new TsSelect2(my$("#i18n-toggler"),{minimumResultsForSearch:-1,width:"100%",dropdownAutoWidth:!0,templateSelection:removeAccents,escapeMarkup:function(e){return e}});return my$("#i18n-toggler").addEventListener("select2:opening",function(){closeDropDowns()}),my$("#i18n-toggler").addEventListener("change",function(){translate(),setupGuide()}),localStorage.getItem("lang")&&(my$("#i18n-toggler").selectedIndex=localStorage.getItem("lang"),changeEvent("#i18n-toggler")),translate(),e}function setupCurrency(){var e=new TsSelect2(my$("#CurrencyValue"),{minimumResultsForSearch:-1,width:"100%",dropdownAutoWidth:!0,escapeMarkup:function(e){return e}});return my$("#CurrencyValue").addEventListener("select2:opening",function(){closeDropDowns()}),my$("#CurrencyValue").addEventListener("change",function(){SwitchCurrencyLabel(),clearCPriceDFI(),clearCPriceToken()}),localStorage.getItem("Currency")&&(my$("#CurrencyValue").selectedIndex=localStorage.getItem("Currency"),changeEvent("#CurrencyValue")),SwitchCurrencyLabel(),clearCPriceDFI(),clearCPriceToken(),e}function setupFirstToken(){var e=new TsSelect2(my$("#FirstTokenValue"),{minimumResultsForSearch:-1,width:"100%",dropdownAutoWidth:!0,templateResult:formatCoin,templateSelection:formatCoin,escapeMarkup:function(e){return e}});return my$("#FirstTokenValue").addEventListener("select2:opening",function(){closeDropDowns()}),my$("#FirstTokenValue").addEventListener("change",function(){SwitchFirstTokenLabel(),clearCPriceDFI();for(var e=my$("#OtherTokenValue"),t=-1,n=0;n<e.length;n++)if("DFI"==e[n].value){t=n;break}if(0==my$("#FirstTokenValue").selectedIndex){for(n=0;n<t;n++)e[n].className="";for(n=t;n<e.length;n++)e[n].className="optInvisible";e.selectedIndex=1}else if(1==my$("#FirstTokenValue").selectedIndex){for(n=0;n<t;n++)e[n].className="optInvisible";for(n=t;n<e.length;n++)e[n].className="";e.selectedIndex=t}changeEvent("#OtherTokenValue")}),localStorage.getItem("FirstToken")&&(my$("#FirstTokenValue").selectedIndex=localStorage.getItem("FirstToken")),SwitchFirstTokenLabel(),changeEvent("#FirstTokenValue"),e}function setupOtherToken(){var e=new TsSelect2(my$("#OtherTokenValue"),{minimumResultsForSearch:-1,width:"100%",dropdownAutoWidth:!0,templateResult:formatCoin,templateSelection:formatCoin,escapeMarkup:function(e){return e}});return my$("#OtherTokenValue").addEventListener("select2:opening",function(){closeDropDowns()}),my$("#OtherTokenValue").addEventListener("change",function(){SwitchOtherTokenLabel(),clearCPriceToken()}),localStorage.getItem("OtherToken")&&(my$("#OtherTokenValue").selectedIndex=localStorage.getItem("OtherToken")),SwitchOtherTokenLabel(),changeEvent("#OtherTokenValue"),e}var guideChimp=null;function setupGuide(){null!=guideChimp?createTutorial(guideChimp):((guideChimp=createTutorial(guideChimp)).on("onStop",()=>{localStorage.setItem("Tutorial-N",guideChimp.currentStepIndex)}),guideChimp.on("onComplete",()=>{localStorage.removeItem("Tutorial-N")}),my$("#play").addEventListener("mouseover",function(){""==my$("#calc").style.display&&(my$("#play").style.display="none",my$("#play2").style.display="block")}),my$("#play").addEventListener("mouseout",function(){""==my$("#calc").style.display&&(my$("#play").style.display="block",my$("#play2").style.display="none")}),my$("#playButtons").addEventListener("click",function(){""==my$("#calc").style.display&&startTutorial(guideChimp)}),"Started"!=localStorage.getItem("Tutorial")&&startTutorial(guideChimp))}function setupInfo(){my$("#infoB").addEventListener("mouseover",function(){my$("#infoB").style.display="none",my$("#infoB2").style.display="block"}),my$("#infoB").addEventListener("mouseout",function(){my$("#infoB").style.display="block",my$("#infoB2").style.display="none"}),my$("#infoButtons").addEventListener("click",function(){info()})}function removeAccents(e){return e.text.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function clearCPriceDFI(){"usd"==my$("#CurrencyValue").value&&"dUSD"==my$("#FirstTokenValue").value?(my$("#cPriceDFI").value=1,inputEvent("#cPriceDFI"),my$("#cPriceDFI").disabled=!0,my$("#cPriceDFI").parentElement.classList.add("auto"),my$("#fPriceDFI").value=1,inputEvent("#fPriceDFI"),my$("#fPriceDFI").disabled=!0,my$("#fPriceDFI").parentElement.classList.add("auto")):(my$("#cPriceDFI").value="",inputEvent("#cPriceDFI"),my$("#cPriceDFI").disabled=!1,my$("#cPriceDFI").parentElement.classList.remove("auto"),my$("#fPriceDFI").value="",inputEvent("#fPriceDFI"),my$("#fPriceDFI").disabled=!1,my$("#fPriceDFI").parentElement.classList.remove("auto"))}function clearCPriceToken(){"usd"==my$("#CurrencyValue").value&&("USDC"==my$("#OtherTokenValue").value||"USDT"==my$("#OtherTokenValue").value)||"btc"==my$("#CurrencyValue").value&&"BTC"==my$("#OtherTokenValue").value||"eth"==my$("#CurrencyValue").value&&"ETH"==my$("#OtherTokenValue").value?(my$("#cPriceToken").value=1,inputEvent("#cPriceToken"),my$("#cPriceToken").disabled=!0,my$("#cPriceToken").parentElement.classList.add("auto"),my$("#fPriceToken").value=1,inputEvent("#fPriceToken"),my$("#fPriceToken").disabled=!0,my$("#fPriceToken").parentElement.classList.add("auto")):"bits"==my$("#CurrencyValue").value&&"BTC"==my$("#OtherTokenValue").value?(my$("#cPriceToken").value=1e6,inputEvent("#cPriceToken"),my$("#cPriceToken").disabled=!0,my$("#cPriceToken").parentElement.classList.add("auto"),my$("#fPriceToken").value=1e6,inputEvent("#fPriceToken"),my$("#fPriceToken").disabled=!0,my$("#fPriceToken").parentElement.classList.add("auto")):"sats"==my$("#CurrencyValue").value&&"BTC"==my$("#OtherTokenValue").value?(my$("#cPriceToken").value=1e8,inputEvent("#cPriceToken"),my$("#cPriceToken").disabled=!0,my$("#cPriceToken").parentElement.classList.add("auto"),my$("#fPriceToken").value=1e8,inputEvent("#fPriceToken"),my$("#fPriceToken").disabled=!0,my$("#fPriceToken").parentElement.classList.add("auto")):(my$("#cPriceToken").value="",inputEvent("#cPriceToken"),my$("#fPriceToken").value="",inputEvent("#fPriceToken"),my$("#cPriceDFI").disabled||(my$("#cPriceToken").disabled=!1,my$("#cPriceToken").parentElement.classList.remove("auto")),my$("#fPriceDFI").disabled||(my$("#fPriceToken").disabled=!1,my$("#fPriceToken").parentElement.classList.remove("auto")))}function SwitchCurrencyLabel(){var t=my$("#CurrencyValue").options[my$("#CurrencyValue").selectedIndex].innerHTML;myMap("[name='Currency']",function(e){e.innerHTML=t}),localStorage.setItem("Currency",my$("#CurrencyValue").selectedIndex)}function SwitchFirstTokenLabel(){var t=my$("#FirstTokenValue").value;myMap("[name='FirstToken']",function(e){e.innerHTML=coinNameToImg(t)}),myMap("[name='FirstRatio']",function(e){e.innerHTML=coinNameToImg(t)}),my$("#xLabel").children[3].innerHTML=t,localStorage.setItem("FirstToken",my$("#FirstTokenValue").selectedIndex)}function SwitchOtherTokenLabel(){var t=my$("#OtherTokenValue").value;myMap("[name='OtherToken']",function(e){e.innerHTML=coinNameToImg(t)}),myMap("[name='OtherRatio']",function(e){e.innerHTML=coinNameToImg(t)}),my$("#xLabel").children[1].innerHTML=t,localStorage.setItem("OtherToken",my$("#OtherTokenValue").selectedIndex)}function formatCoin(e,t){if(e.element&&e.element.className&&t.classList.add(e.element.className),!e.id)return e.text;t=document.createElement("img");return t.src="img/"+e.id+".svg",t.class="img-flag",t}function coinNameToImg(e){return'<img src="img/'+e+'.svg" class="img-flag"/>'}function prettyNumber(e){return""==e?"":numbro(e).format({optionalMantissa:!0,thousandSeparated:!0,trimMantissa:!0})}function cCalculate(){xCalculate("c")}function fCalculate(){xCalculate("f")}function xCalculate(e){calcPriceRatio(e),calculate()}function calcPriceRatio(e){var t="#"+e+"PriceToken",n="#"+e+"PriceDFI",e="#"+e+"PriceRatio";my$(n).value&&my$(t).value?my$(e).value=prettyNumber(my$(t).value/my$(n).value):my$(e).value=""}function createTutorial(e){var t="right",n="top",i="right",a="left",o="left",r=(window.matchMedia("(max-width: 900px)").matches&&(i="top",a="right",o=n="left"),getLanguageObj()),t=[{element:"#play",title:r.tour.play},{element:"#infoB",title:r.tour.infoB},{title:r.tour.title},{element:"#CurrencyValueDiv",title:r.tour.CurrencyValueDiv,position:t},{element:"#FirstTokenValueDiv",title:r.tour.FirstTokenValueDiv,position:t},{element:"#OtherTokenValueDiv",title:r.tour.OtherTokenValueDiv,position:t},{element:"#sync",title:r.tour.sync,position:t},{element:"#cPriceDFIDiv",title:r.tour.cPriceDFIDiv,position:t},{element:"#cPriceTokenDiv",title:r.tour.cPriceTokenDiv,position:t},{element:"#cPriceRatioDiv",title:r.tour.cPriceRatioDiv,position:t},{element:"#fPriceDFIDiv",title:r.tour.fPriceDFIDiv,position:t},{element:"#fPriceTokenDiv",title:r.tour.fPriceTokenDiv,position:t},{element:"#cAmountDFIDiv",title:r.tour.cAmountDFIDiv,position:n},{element:"#cAmountTokenDiv",title:r.tour.cAmountTokenDiv,position:n},{element:"#interestH",title:r.tour.interestH,position:n},{element:"#aprDiv",title:r.tour.aprDiv,position:n},{element:"#feeDiv",title:r.tour.feeDiv,position:n},{element:"#durationDiv",title:r.tour.durationDiv,position:n},{element:"#periodDiv",title:r.tour.periodDiv,position:n},{element:"#taxDiv",title:r.tour.taxDiv,position:n},{element:"#LMA",title:r.tour.LMA,position:i},{element:"#IV",title:r.tour.IV,position:a},{element:"#HV",title:r.tour.HV,position:o},{element:"#HV1",title:r.tour.HV1,position:o},{element:"#LMV",title:r.tour.LMV,position:a},{element:"#LMIV",title:r.tour.LMIV,position:o},{element:"#plot",title:r.tour.plot,position:"top"}];return null!=e?(e.tour=t,e):GuideChimp(t,{padding:5})}function startTutorial(e){var t=localStorage.getItem("Tutorial-N");t?e.start(t):e.start(),localStorage.setItem("Tutorial","Started")}function compareValues(e,t,n,i){my$(i).parentElement.firstElementChild.classList.remove("minus"),my$(i).parentElement.firstElementChild.classList.remove("plus"),e!=t&&0!=e&&0!=t&&(t<e?my$(i).parentElement.firstElementChild.classList.add("minus"):my$(i).parentElement.firstElementChild.classList.add("plus"))}function compareTotalValues(e,t,n,i,a,o){var r;a&&(r="c",(e=e)<t&&(r="fh",e=t),e<n&&(r="fhDFI",e=n),e<i&&(r="fhT",e=i),e<a&&(r="f",e=a),e<o&&(r="fi",e=o),e&&(my$("#best").classList.add("best-"+r),"fhDFI"!=r&&"fhT"!=r||my$("#best1").classList.add("best-fh1")))}function calculate(){var e,t,n,i,a,o,r,l,s=0,u=0,c=0,m=0,d=0,p=0,y=0,f=0,v=0,h=0,T=0,$=0,D=0,I=0,g=0,k=0,P=0,F=0,V=0,L=0,C=0,E=0;my$("#best").className="",my$("#best1").className="",runOnChildren("#amountsParent > div",function(e){e.classList.add("shadow")}),runOnChildren("#values > div",function(e){e.classList.add("shadow")}),my$("#valuesTitles3").classList.remove("shadow"),runOnChildren("#fAmounts > div",function(e){e.dataset.tooltip=""}),runOnChildren("#fAmountsI > div",function(e){e.dataset.tooltip=""}),runOnChildren("#mining > div",function(e){e.dataset.tooltip=""}),runOnChildren("#miningI > div",function(e){e.dataset.tooltip=""}),my$("#int").hidden=!0,createEmptyPlot(),(my$("#cPriceToken").value&&my$("#cPriceDFI").value||my$("#cPriceRatio").value)&&my$("#cAmountDFI").value&&(e=0,c=+my$("#cAmountDFI").value,my$("#cPriceToken").value&&my$("#cPriceDFI").value?e=(u=+my$("#cPriceToken").value)/(s=+my$("#cPriceDFI").value):my$("#cPriceRatio").value&&(e=+my$("#cPriceRatio").value),y=(p=(m=c/e)*u)+(d=c*s),t=+my$("#fPriceToken").value,n=+my$("#fPriceDFI").value,i=+my$("#fPriceRatio").value,my$("#fPriceToken").value&&my$("#fPriceDFI").value&&(i=t/n,n==s&&t==u&&(f=c,v=m)),my$("#initialValues").classList.remove("shadow"),i&&(addDiffToolTip("#fAmountDFI",f=v||f?f:i*(v=Math.sqrt(m*c*1/i)),c),addDiffToolTip("#fAmountToken",v,m),I=(D=v*t)+($=f*n),L=(V=m*t)+(F=c*n),C=2*c*n,E=2*m*t,addDiffToolTip("#fValueDFI",$,F),addDiffToolTip("#fValueToken",D,V),addDiffToolTip("#fValue",I,L),my$("#fAmounts").classList.remove("shadow"),my$("#holding").classList.remove("shadow"),my$("#holding1").classList.remove("shadow"),my$("#mining").classList.remove("shadow"),(0<my$("#apr").value||0<my$("#fee").value)&&my$("#duration").value&&0<my$("#duration").value&&(s=+my$("#apr").value,u=+my$("#fee").value,a=+my$("#period").value,o=+my$("#duration").value,r=+my$("#tax").value/100,s=s/100*o/365,u=u/100*o/365,l=0,T=a&&a<o?(l=o/(a=a<1/2880?1/2880:a),h=f+(f*((s=Math.pow(1+.998*s/l,l)-1)+(u=Math.pow(1+.998*u/l,l)-1))-3268e-7*l)*(1-r),v+v*(s+u)*(1-r)):(h=f+f*(2*s+u)*(1-r),v+v*u*(1-r)),addDiffToolTip("#fAmountDFII",h,c),addDiffToolTip("#fAmountTokenI",T,m),P=(k=T*t)+(g=h*n),addDiffToolTip("#fValueDFII",g,F),addDiffToolTip("#fValueTokenI",k,V),addDiffToolTip("#fValueI",P,L),my$("#fAmountsI").classList.remove("shadow"),my$("#miningI").classList.remove("shadow")),createPlot(e,i,I,P,L))),my$("#cAmountToken").value=prettyNumber(m),my$("#cValueToken").value=prettyNumber(p),my$("#cValueDFI").value=prettyNumber(d),my$("#cValue").value=prettyNumber(y),my$("#fAmountToken").value=prettyNumber(v),my$("#fAmountDFI").value=prettyNumber(f),my$("#fAmountTokenI").value=prettyNumber(T),my$("#fAmountDFII").value=prettyNumber(h),my$("#fValueToken").value=prettyNumber(D),my$("#fValueDFI").value=prettyNumber($),my$("#fValue").value=prettyNumber(I),my$("#fValueTokenH").value=prettyNumber(V),my$("#fValueDFIH").value=prettyNumber(F),my$("#fValueH").value=prettyNumber(L),my$("#fValueDFIHDFI").value=prettyNumber(C),my$("#fValueTokenHToken").value=prettyNumber(E),compareValues(F,$,"#fValueDFIH","#fValueDFI"),compareValues(V,D,"#fValueTokenH","#fValueToken"),compareValues(L,I,"#fValueH","#fValue"),my$("#fValueTokenI").value=prettyNumber(k),my$("#fValueDFII").value=prettyNumber(g),my$("#fValueI").value=prettyNumber(P),compareValues(F,g,"#fValueDFIH","#fValueDFII"),compareValues(V,k,"#fValueTokenH","#fValueTokenI"),compareValues(L,P,"#fValueH","#fValueI"),compareTotalValues(y,L,C,E,I,P)}function compareNumbers(e,t){return e-t}function createEmptyPlot(){new Chartist.Line(".ct-chart",{labels:[0,25,50,100,125,150,175,200],series:[[]]},{high:100,low:-100})}function createPlot(e,t,n,i,a){t=Math.round(t/e*100);if(priceRatios=[],points=[],points2=[],t<500)for(let e=0;e<11;e++)priceRatios.push(50*e);else{var o=Math.round(2*t/11);for(let e=0;e<11;e++)priceRatios.push(o*e);priceRatios.push(t)}priceRatios.push(t),priceRatios=[...new Set(priceRatios)].sort(compareNumbers);for(let e=0;e<priceRatios.length;e++)points.push(100*(2*Math.sqrt(priceRatios[e]/100)/(1+priceRatios[e]/100)-1));if(i){my$("#int").hidden=!1,interest_ratio=i/n;for(let e=0;e<priceRatios.length;e++)points2.push(100*(2*interest_ratio*Math.sqrt(priceRatios[e]/100)/(1+priceRatios[e]/100)-1))}priceRatios[priceRatios.indexOf(t)]=t+" (from input)",new Chartist.Line(".ct-chart",{labels:priceRatios,series:[points,points2]},{high:Math.max.apply(null,points.concat(points2)),low:-100,showArea:!0,plugins:[Chartist.plugins.ctThreshold({threshold:0})]})}async function getOraclePrice(e){return fetch("https://ocean.defichain.com/v0/mainnet/prices/"+e+"-USD").then(e=>e.json()).then(function(e){return e.data.price.aggregated.amount}).catch(function(e){return alert("An error happened while querying the oracle."),0})}async function getCoinGeckoPrice(t,n){return fetch("https://api.coingecko.com/api/v3/simple/price?ids="+t+"&vs_currencies="+n).then(e=>e.json()).then(function(e){return e[t][n]}).catch(function(e){return alert("An error happened while querying CoinGecko."),0})}async function getCurrencyUSDRatio(e){var t=await getCoinGeckoPrice("bitcoin","usd");return 0==t?0:await getCoinGeckoPrice("bitcoin",e)/t}async function getPrices(){my$("#sync").classList.add("rotate");var e=1,t=my$("#OtherTokenValue").value,t=("dUSD"!=my$("#FirstTokenValue").value&&(e=await getOraclePrice(my$("#FirstTokenValue").value)),await getOraclePrice(t)),n=1,i=my$("#CurrencyValue").value;"usd"!=i&&(n=await getCurrencyUSDRatio(i)),0==e||0==t||0==n?t=e="":(e*=n,t*=n),my$("#cPriceDFI").value=e,inputEvent("#cPriceDFI"),my$("#cPriceToken").disabled||(my$("#cPriceToken").value=t,inputEvent("#cPriceToken")),my$("#sync").classList.remove("rotate")}function addDiffToolTip(e,t,n){var t=t-n,n=prettyNumber(t/n*100),i=e.includes("Value")?"Compared to Holding Value\n$ ":"Compared to the Initial Amount\n";0<t&&(i+="+"),i=i+prettyNumber(t)+"\n% "+n,my$(e).parentElement.dataset.tooltip=i}function getLanguageObj(){return eval(my$("#i18n-toggler").value)}function translate(){var e=new Translator({detectLanguage:!1,filesLocation:"/i18n"}),t=my$("#i18n-toggler").value;e.add(t,getLanguageObj()).translatePageTo(t),localStorage.setItem("lang",my$("#i18n-toggler").selectedIndex)}function info(){""==my$("#calc").style.display?(my$("#calc").style.display="none",my$("#info").style.display="grid",my$("body").style.gridTemplateAreas='"h" "i"'):(my$("#calc").style.display="",my$("#info").style.display="none",my$("body").style.gridTemplateAreas='"h" "ca"')}function copyPrices(){my$("#fPriceDFI").value=my$("#cPriceDFI").value,my$("#fPriceToken").value=my$("#cPriceToken").value,inputEvent("#fPriceToken")}function mousedownEvent(e){my$(e).dispatchEvent(new Event("mousedown"))}function inputEvent(e){my$(e).dispatchEvent(new Event("input"))}function changeEvent(e){my$(e).dispatchEvent(new Event("change"))}function runOnChildren(e,t){for(var n=document.querySelectorAll(e),i=0;i<n.length;++i)t(n[i])}function myMap(e,t){return Array.prototype.map.call(document.querySelectorAll(e),t)}function my$(e){return document.querySelector(e)}document.addEventListener("DOMContentLoaded",function(){(gSelects=new Array).push(setupi18n()),setupInfo(),gSelects.push(setupCurrency()),gSelects.push(setupFirstToken()),gSelects.push(setupOtherToken()),my$("#cPriceToken").addEventListener("input",cCalculate),my$("#cPriceDFI").addEventListener("input",cCalculate),my$("#cAmountDFI").addEventListener("input",calculate),my$("#fPriceToken").addEventListener("input",fCalculate),my$("#fPriceDFI").addEventListener("input",fCalculate),my$("#apr").addEventListener("input",calculate),my$("#fee").addEventListener("input",calculate),my$("#duration").addEventListener("input",calculate),my$("#period").addEventListener("input",calculate),my$("#tax").addEventListener("input",calculate),my$("#sync").addEventListener("click",getPrices),my$("#copy").addEventListener("click",copyPrices),cCalculate(),fCalculate(),createEmptyPlot()});
//# sourceMappingURL=functions.min.js.map